joueurs=[
    {
        "id": 1,
        "Score": 16,
        "end": "01:00:00",
        "ch1": 1,
        "ch2": 0,
        "ch3": 0,
        "ch4": 0,
        "ch5": 0,
        "ch6": 0,
        "ch7": 0,
        "ch8": 0,
        "ch9": 0,
        "disqualification": 0,
        "numberchallenge": 0,
        "idrobots": 1,
        "robotname": "chabbbarichou",
        "robotuser": "abir",
        "etablisement": "istic",
        "homologation": 50
    },
    {
        "id": 2,
        "Score": 140,
        "end": "09:00:00",
        "ch1": 0,
        "ch2": 0,
        "ch3": 0,
        "ch4": 0,
        "ch5": 0,
        "ch6": 0,
        "ch7": 0,
        "ch8": 0,
        "ch9": 1,
        "disqualification": 0,
        "numberchallenge": 0,
        "idrobots": 2,
        "robotname": "delta",
        "robotuser": "wala",
        "etablisement": "ensi",
        "homologation": 50
    },
    {
        "id": 3,
        "Score": 15616516,
        "end": "09:00:00",
        "ch1": 1,
        "ch2": 1,
        "ch3": 1,
        "ch4": 1,
        "ch5": 1,
        "ch6": 1,
        "ch7": 0,
        "ch8": 0,
        "ch9": 1,
        "disqualification": 0,
        "numberchallenge": 0,
        "idrobots": 3,
        "robotname": "timoo",
        "robotuser": "nacer",
        "etablisement": "ensit",
        "homologation": 50
    },
    {
        "id": 4,
        "Score": 6000,
        "end": "09:00:00",
        "ch1": 0,
        "ch2": 0,
        "ch3": 0,
        "ch4": 0,
        "ch5": 0,
        "ch6": 0,
        "ch7": 0,
        "ch8": 0,
        "ch9": 1,
        "disqualification": 0,
        "numberchallenge": 0,
        "idrobots": 4,
        "robotname": "sdig",
        "robotuser": "abir",
        "etablisement": "sup",
        "homologation": 50
    },
    {
        "id": 5,
        "Score": 15616516,
        "end": "12:00:00",
        "ch1": 1,
        "ch2": 1,
        "ch3": 1,
        "ch4": 1,
        "ch5": 1,
        "ch6": 1,
        "ch7": 1,
        "ch8": 1,
        "ch9": 1,
        "disqualification": 0,
        "numberchallenge": 0,
        "idrobots": 5,
        "robotname": "sandouk",
        "robotuser": "hamza",
        "etablisement": "sup",
        "homologation": 50
    },
    {
        "id": 6,
        "Score": 16464666,
        "end": "09:00:00",
        "ch1": 1,
        "ch2": 1,
        "ch3": 1,
        "ch4": 1,
        "ch5": 1,
        "ch6": 1,
        "ch7": 1,
        "ch8": 1,
        "ch9": 1,
        "disqualification": 0,
        "numberchallenge": 0,
        "idrobots": 6,
        "robotname": "sandouk",
        "robotuser": "hamza",
        "etablisement": "sup",
        "homologation": 50
    },
    {
        "id": 7,
        "Score": 72222,
        "end": "09:00:00",
        "ch1": 1,
        "ch2": 0,
        "ch3": 0,
        "ch4": 0,
        "ch5": 0,
        "ch6": 0,
        "ch7": 0,
        "ch8": 0,
        "ch9": 1,
        "disqualification": 0,
        "numberchallenge": 0,
        "idrobots": 7,
        "robotname": "linda",
        "robotuser": "loulou",
        "etablisement": "isset",
        "homologation": 1500
    },
    {
        "id": 8,
        "Score": 84455,
        "end": "09:00:00",
        "ch1": 0,
        "ch2": 0,
        "ch3": 0,
        "ch4": 0,
        "ch5": 0,
        "ch6": 0,
        "ch7": 0,
        "ch8": 0,
        "ch9": 1,
        "disqualification": 0,
        "numberchallenge": 0,
        "idrobots": 8,
        "robotname": "siwar",
        "robotuser": "arme",
        "etablisement": "istic",
        "homologation": 1847654
    },
    {
        "id": 9,
        "Score": 1456,
        "end": "09:00:00",
        "ch1": 1,
        "ch2": 1,
        "ch3": 0,
        "ch4": 1,
        "ch5": 1,
        "ch6": 1,
        "ch7": 1,
        "ch8": 1,
        "ch9": 1,
        "disqualification": 0,
        "numberchallenge": 0,
        "idrobots": 9,
        "robotname": "ahmed",
        "robotuser": "proo",
        "etablisement": "istic",
        "homologation": 147
    },
    {
        "id": 10,
        "Score": 45646,
        "end": "09:00:00",
        "ch1": 1,
        "ch2": 1,
        "ch3": 1,
        "ch4": 1,
        "ch5": 1,
        "ch6": 0,
        "ch7": 0,
        "ch8": 0,
        "ch9": 0,
        "disqualification": 0,
        "numberchallenge": 0,
        "idrobots": 10,
        "robotname": "nacer",
        "robotuser": "robnacer",
        "etablisement": "enicar",
        "homologation": 1555
    },
    {
        "id": 11,
        "Score": 611,
        "end": "09:00:00",
        "ch1": 1,
        "ch2": 1,
        "ch3": 1,
        "ch4": 1,
        "ch5": 1,
        "ch6": 0,
        "ch7": 0,
        "ch8": 1,
        "ch9": 0,
        "disqualification": 0,
        "numberchallenge": 0,
        "idrobots": 11,
        "robotname": "chokri",
        "robotuser": "choo",
        "etablisement": "istic",
        "homologation": 14561
    },
    {
        "id": 12,
        "Score": 4136,
        "end": "09:00:00",
        "ch1": 1,
        "ch2": 1,
        "ch3": 1,
        "ch4": 1,
        "ch5": 1,
        "ch6": 1,
        "ch7": 0,
        "ch8": 0,
        "ch9": 0,
        "disqualification": 0,
        "numberchallenge": 0,
        "idrobots": 12,
        "robotname": "hama",
        "robotuser": "mohamed",
        "etablisement": "iset",
        "homologation": 266
    },
    {
        "id": 13,
        "Score": 240,
        "end": "09:00:00",
        "ch1": 1,
        "ch2": 1,
        "ch3": 1,
        "ch4": 1,
        "ch5": 1,
        "ch6": 1,
        "ch7": 1,
        "ch8": 1,
        "ch9": 1,
        "disqualification": 0,
        "numberchallenge": 0,
        "idrobots": 13,
        "robotname": "lasmer",
        "robotuser": "chdoula",
        "etablisement": "fst",
        "homologation": 1545
    },
    {
        "id": 14,
        "Score": 611,
        "end": "10:00:00",
        "ch1": 1,
        "ch2": 1,
        "ch3": 1,
        "ch4": 0,
        "ch5": 0,
        "ch6": 0,
        "ch7": 0,
        "ch8": 0,
        "ch9": 1,
        "disqualification": 0,
        "numberchallenge": 0,
        "idrobots": 14,
        "robotname": "beaugosse",
        "robotuser": "basma",
        "etablisement": "fms",
        "homologation": 15643
    },
    {
        "id": 17,
        "Score": 7777777,
        "end": "07:00:00",
        "ch1": 0,
        "ch2": 0,
        "ch3": 0,
        "ch4": 0,
        "ch5": 0,
        "ch6": 0,
        "ch7": 0,
        "ch8": 0,
        "ch9": 0,
        "disqualification": 0,
        "numberchallenge": 0,
        "idrobots": 17,
        "robotname": "ayoub",
        "robotuser": "lazher",
        "etablisement": "istic",
        "homologation": 50
    }
]
undefined

const listeJoueurs = document.getElementById("liste-joueurs");
  
  // Fonction pour afficher un joueur
  function afficherJoueur(joueur) {
    const elementJoueur = document.createElement("div");
    elementJoueur.classList.add("joueur");
  
    const elementNom = document.createElement("h2");
    elementNom.classList.add("nom");
    elementNom.textContent = joueur.robotname;
  
    const elementPoints = document.createElement("p");
    elementPoints.classList.add("points");
    elementPoints.textContent = joueur.Score + " points";

    const elementtime = document.createElement("p");
    elementtime.classList.add("time");
    elementtime.textContent = joueur.end  ;
  
    elementJoueur.appendChild(elementNom);
    elementJoueur.appendChild(elementPoints);
    elementJoueur.appendChild(elementtime);
    listeJoueurs.appendChild(elementJoueur);
  }
  
  // Affichage des joueurs
  function compareTimes(time1, time2) {
    // Split time strings into hours, minutes, and seconds
    const [hours1, minutes1, seconds1] = time1.split(":").map(Number);
    const [hours2, minutes2, seconds2] = time2.split(":").map(Number);
    
    // Compare hours
    if (hours1 !== hours2) {
      return hours1 - hours2;
    }
    
    // Compare minutes
    if (minutes1 !== minutes2) {
      return minutes1 - minutes2;
    }
    
    // Compare seconds
    return seconds1 - seconds2;
  }
  function scorefinal(time1,time2,a,b)
  {
    if (a == b)
    { 
      return compareTimes(time1,time2);
    }
    return b - a;
  }
  //joueurs.forEach(afficherJoueur);
  function corr() {
    try {
        joueurs.forEach(afficherJoueur);
        // Animation de la liste
  function animerListe() {
    // Tri des joueurs par points
  
   //joueurs.sort((a, b) => b.Score - a.Score);
   //joueurs.sort((a,b)=> compareTimes(b.end,a.end));
   joueurs.sort((a,b)=>
       scorefinal(a.end,b.end,a.Score,b.Score)
   );
  


    // Mise à jour du DOM
    listeJoueurs.innerHTML = "";
    joueurs.forEach(afficherJoueur);


  
    // Définir le joueur avec le plus de points en haut
    const elementJoueurHaut = document.querySelector(".joueur:first-child");
    elementJoueurHaut.classList.add("haut");
    const image = document.createElement("img");
    image.src = "https://e7.pngegg.com/pngimages/973/360/png-clipart-gold-medal-gold-medal-medal-gold-thumbnail.png";
    image.classList.add("haut-image");
    elementJoueurHaut.appendChild(image);
    const textNode = document.createTextNode(" "+"First Place");
    // Append the text node to the target element
    elementJoueurHaut.appendChild(textNode);
    

    // Définir le joueur avec second de points en haut
    const elementJoueursec = document.querySelector(".joueur:nth-child(2)");
    elementJoueursec.classList.add("sec");
    const imagesec = document.createElement("img");
    imagesec.src = "https://c0.klipartz.com/pngpicture/465/115/gratis-png-medalla-de-plata-medalla-de-oro-medalla.png";
    imagesec.classList.add("haut-image");
    elementJoueursec.appendChild(imagesec);
    const textNode2 = document.createTextNode(" "+"Second Place");
    // Append the text node to the target element
    elementJoueursec.appendChild(textNode2);


    // Définir le joueur avec third  de points en haut
    const elementJoueurthird = document.querySelector(".joueur:nth-child(3)");
    elementJoueurthird.classList.add("third");
    const imagethird = document.createElement("img");
    imagethird.src = "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRf9KuY6VaqKF_H1DLui7ufCzSY-naoNXwjy_kREH15vwH02ne_dTrAXs_ZhATgydNSK0A&usqp=CAU";
    imagethird.classList.add("haut-image");
    elementJoueurthird.appendChild(imagethird);
    const textNode3 = document.createTextNode(" "+"Third Place");
    // Append the text node to the target element
    elementJoueurthird.appendChild(textNode3);


    for (let i = 4; i <= 40; i++) {
      const elementJoueur = document.querySelector(`.joueur:nth-child(${i})`);
      
      if (elementJoueur) { // Check if the element exists
        elementJoueur.classList.add("a");
        const textNode = document.createTextNode(` ${i} Place`); // Dynamic text based on index
        elementJoueur.appendChild(textNode);
      }
    }

    // Définir un délai pour la prochaine animation
    setTimeout(animerListe, 3000);
  }
  
  // Démarrage de l'animation
  animerListe();

 /* function refreshPage() {
    window.location.reload(); // Reload the current page
}*/
function refreshPage() {
    try {
        // Attempt to reload the page
        window.location.reload();
    } catch (error) {
        // If an error occurs (e.g., due to restricted permissions), log it and reload the page
        console.error('Error reloading page:', error);
        window.location.reload();
    }
}
// Refresh the page every minute (60,000 milliseconds)
setInterval(refreshPage,6000);
    } catch (error) {
        console.error('An error occurred while iterating over joueurs:', error);
        // Handle the error here
        window.location.reload();
    }}
    corr();
  
